/* Comprehensive CSS Features Test File */
/* This file tests detection of CSS features from web-features package */

/* ===== BASIC CSS ===== */
/* color (high) */
body {
  color: #333;
  background-color: white;
}

/* ===== CSS CUSTOM PROPERTIES ===== */
/* css-variables (high) */
:root {
  --primary-color: #007bff;
  --secondary-color: #6c757d;
  --border-radius: 0.375rem;
  --spacing: 1rem;
}

/* ===== FLEXBOX ===== */
/* css-flexbox (high) */
.flex-container {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: stretch;
  flex-wrap: wrap;
  gap: var(--spacing);
}

/* ===== CSS GRID ===== */
/* css-grid (high) */
.grid-container {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: auto 1fr auto;
  grid-template-areas: 
    "header header header"
    "sidebar main aside"
    "footer footer footer";
  gap: 1rem;
  grid-auto-flow: row;
}

/* css-subgrid (high) */
.subgrid-item {
  display: subgrid;
  grid-template-columns: subgrid;
  grid-template-rows: subgrid;
}

/* ===== TRANSFORMS ===== */
/* css-transforms (high) */
.transform-2d {
  transform: rotate(45deg) scale(1.2) translateX(10px) skew(5deg);
  transform-origin: center;
}

/* transforms3d (high) */
.transform-3d {
  transform: rotateX(45deg) rotateY(30deg) rotateZ(15deg) translate3d(10px, 20px, 30px);
  transform-style: preserve-3d;
  perspective: 1000px;
}

/* ===== TRANSITIONS ===== */
/* css-transitions (high) */
.transition {
  transition: all 0.3s ease-in-out;
  transition-property: opacity, transform, color;
  transition-duration: 0.5s, 0.3s, 0.2s;
  transition-timing-function: ease, linear, cubic-bezier(0.25, 0.1, 0.25, 1);
  transition-delay: 0s, 0.1s, 0.2s;
}

/* ===== ANIMATIONS ===== */
/* css-animations (high) */
@keyframes slideIn {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.animated {
  animation: slideIn 0.5s ease-out;
  animation-fill-mode: forwards;
  animation-iteration-count: infinite;
  animation-direction: alternate;
  animation-play-state: running;
}

/* animation-composition (low) - newly available */
.animation-composition {
  animation-composition: add;
}

/* ===== FILTERS ===== */
/* css-filter-effects (high) */
.filtered {
  filter: blur(5px) brightness(1.2) contrast(1.1) saturate(1.5) hue-rotate(90deg);
}

/* backdrop-filter (high) */
.backdrop-filtered {
  backdrop-filter: blur(10px) brightness(0.8);
}

/* ===== GRADIENTS ===== */
/* css-gradients (high) */
.gradients {
  background: linear-gradient(45deg, red, blue);
  background: radial-gradient(circle, yellow, green);
}

/* css-conic-gradients (high) */
.conic-gradient {
  background: conic-gradient(from 0deg, red, yellow, green, blue, red);
}

/* ===== MASKS ===== */
/* css-masks (high) */
.masked {
  mask: url(mask.svg);
  mask-size: cover;
  mask-position: center;
  mask-repeat: no-repeat;
}

/* ===== SHAPES ===== */
/* css-shapes (high) */
.shape {
  shape-outside: circle(50%);
  shape-margin: 10px;
  shape-image-threshold: 0.5;
  clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
}

/* ===== SCROLL SNAP ===== */
/* scroll-snap (high) */
.scroll-container {
  scroll-snap-type: x mandatory;
  overflow-x: scroll;
  scroll-behavior: smooth;
  scroll-padding: 10px;
  scroll-margin: 5px;
}

.scroll-item {
  scroll-snap-align: start;
  scroll-snap-stop: always;
}

/* ===== ASPECT RATIO ===== */
/* aspect-ratio (high) */
.aspect-ratio {
  aspect-ratio: 16 / 9;
}

/* ===== LOGICAL PROPERTIES ===== */
/* css-logical-props (high) */
.logical {
  margin-inline-start: 1rem;
  margin-inline-end: 2rem;
  padding-block-start: 0.5rem;
  padding-block-end: 1rem;
  border-inline-width: 2px;
  border-block-color: blue;
  inset-inline-start: 10px;
  inset-block-end: 20px;
}

/* ===== CONTAINER QUERIES ===== */
/* container-queries (low) - newly available */
.container {
  container-type: inline-size;
  container-name: sidebar;
}

@container sidebar (min-width: 400px) {
  .card {
    display: flex;
    flex-direction: row;
  }
}

@container (max-width: 300px) {
  .responsive {
    font-size: 14px;
  }
}

/* ===== CASCADE LAYERS ===== */
/* cascade-layers (low) - newly available */
@layer base, components, utilities;

@layer base {
  body {
    margin: 0;
    font-family: system-ui, sans-serif;
  }
}

@layer components {
  .button {
    padding: 0.5rem 1rem;
    border: none;
    border-radius: var(--border-radius);
  }
}

/* ===== CSS NESTING ===== */
/* css-nesting (low) - newly available */
.nested {
  color: blue;
  
  &:hover {
    color: red;
  }
  
  .child {
    font-size: 14px;
    
    &::before {
      content: "→ ";
    }
  }
}

/* ===== MATH FUNCTIONS ===== */
/* css-math-functions (high) */
.math {
  width: calc(100% - 2rem);
  height: min(50vh, 400px);
  margin: max(1rem, 5%);
  padding: clamp(0.5rem, 2vw, 2rem);
}

/* ===== COLOR FUNCTIONS ===== */
/* color-function (high) */
.colors {
  color: hsl(200 50% 50%);
  background: hwb(120 20% 30%);
  border-color: lab(50% 20 -30);
  outline-color: lch(70% 45 200);
}

/* color-mix (low) - newly available */
.color-mix {
  color: color-mix(in srgb, red 50%, blue);
  background: color-mix(in oklch, yellow 30%, green);
}

/* ===== PSEUDO-CLASSES ===== */
/* :has() (high) */
.has-selector:has(> img) {
  border: 2px solid blue;
}

.has-selector:has(.special) {
  background: yellow;
}

/* :is() (high) */
:is(h1, h2, h3):is(.title, .heading) {
  font-weight: bold;
}

/* :where() (high) */
:where(article, section) :where(h1, h2) {
  margin-top: 0;
}

/* :not() with selector list (high) */
:not(.excluded, .hidden, [aria-hidden="true"]) {
  display: block;
}

/* focus-visible (high) */
.focus-visible:focus-visible {
  outline: 2px solid blue;
  outline-offset: 2px;
}

/* ===== PSEUDO-ELEMENTS ===== */
/* ::marker (high) */
li::marker {
  color: red;
  font-size: 1.2em;
}

/* ::selection (high) */
::selection {
  background: yellow;
  color: black;
}

/* ::placeholder (high) */
input::placeholder {
  color: #999;
  font-style: italic;
}

/* ::backdrop (high) */
dialog::backdrop {
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(3px);
}

/* ::first-letter (high) */
p::first-letter {
  font-size: 2em;
  float: left;
  line-height: 1;
}

/* ::first-line (high) */
p::first-line {
  font-weight: bold;
  color: blue;
}

/* ===== MEDIA QUERIES ===== */
/* prefers-color-scheme (high) */
@media (prefers-color-scheme: dark) {
  body {
    background: #1a1a1a;
    color: white;
  }
}

/* prefers-reduced-motion (high) */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* prefers-contrast (high) */
@media (prefers-contrast: high) {
  .text {
    color: black;
    background: white;
  }
}

/* color-gamut (high) */
@media (color-gamut: p3) {
  .wide-gamut {
    color: color(display-p3 1 0 0);
  }
}

/* scripting (low) - newly available */
@media (scripting: enabled) {
  .js-enhanced {
    display: block;
  }
}

/* ===== FONT FEATURES ===== */
/* font-display (high) */
@font-face {
  font-family: 'CustomFont';
  src: url('font.woff2') format('woff2');
  font-display: swap;
  unicode-range: U+0000-00FF;
}

/* font-palette (high) */
.font-palette {
  font-palette: --custom-palette;
}

@font-palette-values --custom-palette {
  font-family: 'ColorFont';
  base-palette: 0;
  override-colors: 0 red, 1 blue;
}

/* variable-fonts (high) */
.variable-font {
  font-variation-settings: 'wght' 400, 'wdth' 100, 'slnt' 0;
  font-optical-sizing: auto;
}

/* ===== ADVANCED LAYOUT ===== */
/* display-contents (high) */
.display-contents {
  display: contents;
}

/* position-sticky (high) */
.sticky {
  position: sticky;
  top: 0;
}

/* contain (high) */
.contained {
  contain: layout style paint;
}

/* content-visibility (high) */
.content-visibility {
  content-visibility: auto;
  contain-intrinsic-size: 0 500px;
}

/* ===== OVERFLOW ===== */
/* overflow-anchor (high) */
.overflow-anchor {
  overflow-anchor: none;
}

/* overscroll-behavior (high) */
.overscroll {
  overscroll-behavior: contain;
  overscroll-behavior-x: auto;
  overscroll-behavior-y: none;
}

/* ===== TEXT FEATURES ===== */
/* text-wrap (low) - newly available */
.text-wrap {
  text-wrap: balance;
}

/* hyphens (high) */
.hyphenated {
  hyphens: auto;
}

/* text-decoration enhancements (high) */
.text-decoration {
  text-decoration: underline wavy red;
  text-decoration-thickness: 2px;
  text-underline-offset: 3px;
}

/* text-emphasis (high) */
.text-emphasis {
  text-emphasis: filled circle red;
  text-emphasis-position: over right;
}

/* ===== SCROLLBARS ===== */
/* css-scrollbars (high) */
.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: blue lightgray;
  scrollbar-gutter: stable;
}

/* ===== USER INTERACTION ===== */
/* user-select (high) */
.no-select {
  user-select: none;
}

/* pointer-events (high) */
.no-pointer {
  pointer-events: none;
}

/* resize (high) */
.resizable {
  resize: both;
  overflow: auto;
}

/* caret-color (high) */
input {
  caret-color: red;
}

/* accent-color (high) */
input[type="checkbox"] {
  accent-color: blue;
}

/* ===== APPEARANCE ===== */
/* appearance (high) */
.custom-appearance {
  appearance: none;
}

/* ===== MOTION PATH ===== */
/* css-motion-paths (high) */
.motion-path {
  offset-path: path('M 0 0 L 100 100');
  offset-distance: 50%;
  offset-rotate: auto;
}

/* ===== BLEND MODES ===== */
/* mix-blend-mode (high) */
.blend {
  mix-blend-mode: multiply;
}

/* ===== SUPPORTS QUERIES ===== */
/* css-supports (high) */
@supports (display: grid) {
  .grid-support {
    display: grid;
  }
}

@supports not (display: flex) {
  .no-flex-fallback {
    display: table;
  }
}

/* ===== VIEWPORT UNITS ===== */
/* viewport-units (high) */
.viewport {
  width: 100vw;
  height: 100vh;
  min-height: 100svh; /* Small viewport height */
  max-height: 100lvh; /* Large viewport height */
  padding: 1dvh 1dvw; /* Dynamic viewport units */
}

/* ===== EXPERIMENTAL FEATURES ===== */
/* css-anchor-positioning (false) - limited availability */
.anchor {
  anchor-name: --my-anchor;
}

.positioned {
  position: absolute;
  position-anchor: --my-anchor;
}

/* @property (false) - limited availability */
@property --custom-property {
  syntax: '<color>';
  initial-value: red;
  inherits: false;
}

/* view-transitions (false) - limited availability */
.view-transition {
  view-transition-name: slide;
}

/* ===== PRINT STYLES ===== */
@media print {
  .print-only {
    display: block;
  }
  
  .no-print {
    display: none;
  }
}

/* ===== PAGE RULES ===== */
@page {
  margin: 1in;
  size: A4;
}

@page :first {
  margin-top: 2in;
}

/* ===== COUNTER STYLES ===== */
@counter-style custom-counter {
  system: cyclic;
  symbols: ⭐ ⚡ 🔥;
  suffix: ' ';
}

.custom-list {
  list-style: custom-counter;
}